<h1>RealTimeProducts (WebSocket)</h1>

<ul id="lista">
  {{#each productos}}
    <li>{{this.title}} - ${{this.price}}</li>
  {{/each}}
</ul>

<script src="/socket.io/socket.io.js"></script>
<script>
  const socket = io();
  socket.on('productosActualizados', async () => {
    const res = await fetch('/api/products');
    const data = await res.json();
    const lista = document.getElementById('lista');
    lista.innerHTML = data.payload.map(p => `<li>${p.title} - $${p.price}</li>`).join('');
  });
</script>
